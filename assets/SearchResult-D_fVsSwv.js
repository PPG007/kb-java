import{d as W,u as N,h as X,i as Z,j as ee,t as te,k as ae,l as R,m as S,n as e,p as oe,w as se,s as le,R as D,q as ne,v as re,x as ce,y as ie,z as de,A as $,B as A,C as he,D as me,E as ue,o as ve,L as pe,F as ge,G as ye,H as _e,I as F,J as be,K as k}from"./app-BuwsBRdD.js";const fe=["/","/SpringBoot/","/SpringCloud/","/SpringMVC/","/annotation-and-reflection/","/dubbo/","/javaio/","/javaknowledge/","/javanet/","/javathread/","/mybatis/","/netty/","/spring/","/SpringBoot/docs/async.html","/SpringBoot/docs/auto_config.html","/SpringBoot/docs/config.html","/SpringBoot/docs/cron.html","/SpringBoot/docs/druid.html","/SpringBoot/docs/i18n.html","/SpringBoot/docs/jdbc.html","/SpringBoot/docs/mail.html","/SpringBoot/docs/mvc_config.html","/SpringBoot/docs/mybatis.html","/SpringBoot/docs/shiro.html","/SpringBoot/docs/spring_security.html","/SpringBoot/docs/thymeleaf.html","/SpringBoot/docs/web.html","/SpringCloud/docs/bus.html","/SpringCloud/docs/config.html","/SpringCloud/docs/consul.html","/SpringCloud/docs/eureka.html","/SpringCloud/docs/feign.html","/SpringCloud/docs/gateway.html","/SpringCloud/docs/hystrix.html","/SpringCloud/docs/nacos.html","/SpringCloud/docs/open_feign.html","/SpringCloud/docs/ribbon.html","/SpringCloud/docs/sleuth.html","/SpringCloud/docs/start.html","/SpringCloud/docs/stream.html","/SpringCloud/docs/zookeeper.html","/SpringCloud/docs/zuul.html","/SpringMVC/docs/ajax.html","/SpringMVC/docs/controller.html","/SpringMVC/docs/file.html","/SpringMVC/docs/filter.html","/SpringMVC/docs/java_config.html","/SpringMVC/docs/json.html","/SpringMVC/docs/others.html","/SpringMVC/docs/servlet.html","/SpringMVC/docs/ssm.html","/annotation-and-reflection/docs/annotation_attribute.html","/annotation-and-reflection/docs/annotation_field_set.html","/annotation-and-reflection/docs/annotation_field_type.html","/annotation-and-reflection/docs/annotation_nature.html","/annotation-and-reflection/docs/annotation_set_param.html","/annotation-and-reflection/docs/builtin_annotation.html","/annotation-and-reflection/docs/class.html","/annotation-and-reflection/docs/classloader.html","/annotation-and-reflection/docs/get_annotation_attribute.html","/annotation-and-reflection/docs/meta_annotation.html","/annotation-and-reflection/docs/reflection_method.html","/dubbo/docs/config_rule.html","/dubbo/docs/config_tag.html","/dubbo/docs/environment.html","/dubbo/docs/finish_config.html","/dubbo/docs/high_availability.html","/dubbo/docs/spring.html","/dubbo/docs/springboot.html","/dubbo/docs/start.html","/javaio/docs/buffer.html","/javaio/docs/convert.html","/javaio/docs/data_stream.html","/javaio/docs/object_stream.html","/javaio/docs/print_stream.html","/javaio/docs/random_file.html","/javaio/docs/reader_writer.html","/javaio/docs/stdio.html","/javaknowledge/docs/execution_order_in_extend.html","/javaknowledge/docs/index_design.html","/javaknowledge/docs/interface_and_abstract_class.html","/javaknowledge/docs/is_like_has.html","/javaknowledge/docs/jvm_data.html","/javaknowledge/docs/mysql_index.html","/javaknowledge/docs/mysql_lock.html","/javaknowledge/docs/switch_param.html","/javaknowledge/docs/ternary_operator.html","/javaknowledge/docs/thread_local.html","/javaknowledge/docs/transaction.html","/javaknowledge/docs/transfer.html","/javanet/docs/tcp.html","/javanet/docs/udp.html","/javanet/docs/url.html","/javathread/docs/async_callback.html","/javathread/docs/atomic.html","/javathread/docs/basic.html","/javathread/docs/block_queue.html","/javathread/docs/cas.html","/javathread/docs/collection.html","/javathread/docs/fork_join.html","/javathread/docs/function_interface.html","/javathread/docs/jmm_volatile.html","/javathread/docs/lock.html","/javathread/docs/lock_case.html","/javathread/docs/rwlock.html","/javathread/docs/singleton.html","/javathread/docs/spin.html","/javathread/docs/synchronized.html","/javathread/docs/thread_method.html","/javathread/docs/thread_pool.html","/javathread/docs/util.html","/mybatis/docs/cache.html","/mybatis/docs/config.html","/mybatis/docs/crud.html","/mybatis/docs/dynamic_sql.html","/mybatis/docs/hello_mybatis.html","/mybatis/docs/jdbc.html","/mybatis/docs/life_cycle.html","/mybatis/docs/log.html","/mybatis/docs/multi_table.html","/mybatis/docs/resultmap.html","/netty/docs/encode_decode.html","/netty/docs/group_chat.html","/netty/docs/heart_check.html","/netty/docs/in_out.html","/netty/docs/io_model.html","/netty/docs/netty_core.html","/netty/docs/rpc.html","/netty/docs/task_queue.html","/netty/docs/tcp_package.html","/netty/docs/thread_model.html","/netty/docs/websocket.html","/spring/docs/annotation.html","/spring/docs/aop.html","/spring/docs/autowired.html","/spring/docs/di.html","/spring/docs/hello_spring.html","/spring/docs/ioc.html","/spring/docs/ioc_create_object.html","/spring/docs/java_config.html","/spring/docs/mybatis.html","/spring/docs/proxy.html","/spring/docs/spring_config.html","/spring/docs/start.html","/spring/docs/transaction.html","/404.html","/SpringBoot/docs/","/SpringCloud/docs/","/SpringMVC/docs/","/annotation-and-reflection/docs/","/dubbo/docs/","/javaio/docs/","/javaknowledge/docs/","/javanet/docs/","/javathread/docs/","/mybatis/docs/","/netty/docs/","/spring/docs/"],je="SLIMSEARCH_QUERY_HISTORY",y=F(je,[]),Se=()=>{const{queryHistoryCount:s}=k;return{enabled:s>0,queryHistories:y,addQueryHistory:c=>{y.value=Array.from(new Set([c,...y.value.slice(0,s-1)]))},removeQueryHistory:c=>{y.value=[...y.value.slice(0,c),...y.value.slice(c+1)]}}},Q=s=>fe[s.id]+("anchor"in s?`#${s.anchor}`:""),ke="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:E}=k,_=F(ke,[]),Ce=()=>({enabled:E>0,resultHistories:_,addResultHistory:r=>{{const c={link:Q(r),display:r.display};"header"in r&&(c.header=r.header),_.value=[c,..._.value.slice(0,E-1)]}},removeResultHistory:r=>{_.value=[..._.value.slice(0,r),..._.value.slice(r+1)]}}),we=s=>{const{page:r,routeLocale:c}=he(),C=me(),l=R(0),b=S(()=>l.value>0),h=ue([]);return ve(()=>{const{search:w,terminate:v}=pe(),f=ye(p=>{const{resultsFilter:x=o=>o,querySplitter:g,suggestionsFilter:M,...n}=C.value;p?(l.value+=1,w(p,c.value,n).then(o=>x(o,p,c.value,r.value)).then(o=>{l.value-=1,h.value=o}).catch(o=>{console.warn(o),l.value-=1,l.value||(h.value=[])})):h.value=[]},k.searchDelay-k.suggestDelay,{maxWait:5e3});ge([s,c],([p])=>f(p.join(" "))),_e(()=>{v()})}),{isSearching:b,results:h}};var He=W({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(s,{emit:r}){const c=N(),C=X(),l=Z(ee),{addQueryHistory:b,queryHistories:h,removeQueryHistory:w}=Se(),{resultHistories:v,addResultHistory:f,removeResultHistory:p}=Ce(),x=te(s,"queries"),{results:g,isSearching:M}=we(x),n=ae({isQuery:!0,index:0}),o=R(0),m=R(0),L=S(()=>h.value.length>0||v.value.length>0),H=S(()=>g.value.length>0),q=S(()=>g.value[o.value]||null),I=()=>{const{isQuery:t,index:a}=n;a===0?(n.isQuery=!t,n.index=t?v.value.length-1:h.value.length-1):n.index=a-1},T=()=>{const{isQuery:t,index:a}=n;a===(t?h.value.length-1:v.value.length-1)?(n.isQuery=!t,n.index=0):n.index=a+1},z=()=>{o.value=o.value>0?o.value-1:g.value.length-1,m.value=q.value.contents.length-1},U=()=>{o.value=o.value<g.value.length-1?o.value+1:0,m.value=0},O=()=>{m.value<q.value.contents.length-1?m.value+=1:U()},P=()=>{m.value>0?m.value-=1:z()},B=t=>t.map(a=>be(a)?a:e(a[0],a[1])),Y=t=>{if(t.type==="customField"){const a=ie[t.index]||"$content",[u,i=""]=de(a)?a[C.value].split("$content"):a.split("$content");return t.display.map(d=>e("div",B([u,...d,i])))}return t.display.map(a=>e("div",B(a)))},j=()=>{o.value=0,m.value=0,r("updateQuery",""),r("close")},G=()=>e("div",{class:"slimsearch-records"},e("div",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},l.value.queryHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},h.value.map((t,a)=>{const u=n.isQuery&&n.index===a;return e("li",{class:["slimsearch-record-matches",{active:u}],role:"option","aria-selected":u,onClick:()=>{r("updateQuery",t)}},e("div",[e($,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},t),e("button",{type:"button",class:"slimsearch-remove-icon",title:l.value.remove,"aria-label":l.value.remove,innerHTML:A,onClick:i=>{i.preventDefault(),i.stopPropagation(),w(a)}})]))}))])),J=()=>e("ul",{class:"slimsearch-records"},e("li",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},l.value.resultHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},v.value.map((t,a)=>{const u=!n.isQuery&&n.index===a;return e("li",{class:["slimsearch-record-matches",{active:u}],role:"option","aria-selected":u},e(D,{to:t.link,onClick:()=>{j()}},()=>[e($,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[t.header?e("div",{class:"slimsearch-record-content-header"},t.header):null,e("div",t.display.map(i=>B(i)).flat())]),e("button",{type:"button",class:"slimsearch-remove-icon",title:l.value.remove,"aria-label":l.value.remove,innerHTML:A,onClick:i=>{i.preventDefault(),i.stopPropagation(),p(a)}})]))}))]));return oe("keydown",t=>{if(s.isFocusing){if(H.value){if(t.key==="ArrowUp")P();else if(t.key==="ArrowDown")O();else if(t.key==="Enter"){const a=q.value.contents[m.value];b(s.queries.join(" ")),f(a),c.push(Q(a)),j()}}else if(t.key==="ArrowUp")I();else if(t.key==="ArrowDown")T();else if(t.key==="Enter"){const{index:a}=n;n.isQuery?(t.preventDefault(),r("updateQuery",h.value[a])):(c.push(v.value[a].link),j())}}}),se([o,m],()=>{var t;(t=document.querySelector(".slimsearch-record.active .slimsearch-record-matches.active"))==null||t.scrollIntoView(!1)},{flush:"post"}),()=>e("div",{id:"slimsearch-results",class:["slimsearch-result-wrapper",{empty:s.queries.length?!H.value:!L.value}]},s.queries.length?M.value?e(le,{hint:l.value.searching}):H.value?e("div",{class:"slimsearch-records",role:"listbox","aria-labeledby":"slimsearch-label"},g.value.map(({title:t,contents:a},u)=>{const i=o.value===u;return e("div",{class:["slimsearch-record",{active:i}],role:"group","aria-selected":i},[e("div",{class:"slimsearch-record-title"},t||l.value.defaultTitle),e("ul",{class:"slimsearch-record-contents"},a.map((d,K)=>{const V=i&&m.value===K;return e("li",{class:["slimsearch-record-matches",{active:V}],role:"option","aria-selected":V},e(D,{to:Q(d),onClick:()=>{b(s.queries.join(" ")),f(d),j()}},()=>[d.type==="text"?null:e(d.type==="title"?ne:d.type==="heading"?re:ce,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[d.type==="text"&&d.header?e("div",{class:"slimsearch-record-content-header"},d.header):null,e("div",Y(d))])]))}))])})):l.value.emptyResult:L.value?[G(),J()]:l.value.emptyHistory)}});export{He as default};
